<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Decision Tree</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F8F8;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .animate-fadeInUp {
            animation: fadeInUp 0.5s ease-out;
        }

        .scrollable-history {
            max-height: 50vh;
            overflow-y: auto;
        }
    </style>
</head>
<body class="bg-white p-4 md:p-8 flex flex-col items-center justify-center min-h-screen">

    <!-- Main Application Container -->
    <div id="app" class="w-full max-w-5xl bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col md:flex-row h-full">
        <!-- Sidebar and Main Content will be populated by JavaScript -->
    </div>

    <script>
        // The structure is based on the logic from the provided CSV file.
        let decisionTreeData = {
          'start': {
            question: 'Which geo is included in the RFP?',
            choices: [
              { label: 'US', nextStepId: 'us_geo_path' },
              { label: 'CA, FR, UK, DE, AUS', nextStepId: 'intl_geo_path' },
              { label: 'Other', nextStepId: 'other_geo_outcome' },
            ],
          },
          'us_geo_path': {
            question: 'Which formats/channels are included?',
            choices: [
              { label: 'CTV', nextStepId: 'us_ctv_outcome' },
              { label: 'Web', nextStepId: 'us_web_path' }
            ],
          },
          'intl_geo_path': {
            question: 'Which formats/channels are included?',
            choices: [
              { label: 'CTV', nextStepId: 'intl_ctv_outcome' },
              { label: 'Web', nextStepId: 'intl_web_path' }
            ],
          },
          'us_web_path': {
            question: 'Please select from the following options.',
            choices: [
              { label: 'TripleLift Audiences', nextStepId: 'campaign_goal_question' },
              { label: 'TripleLift Audiences does not cover my targeting needs.', nextStepId: 'us_web_specific_formats' }
            ],
          },
          'us_ctv_outcome': {
            outcome: `
              <p class="text-lg sm:text-xl font-semibold mb-2">Decision Reached!</p>
              <p>
                  <a href="https://docs.google.com/presentation/d/1fsjOtXxDzJpuvzna0ldTK_os9xEWOqI27PC5YZTsOso/edit?slide=id.g3365098668c_0_1834#slide=id.g3365098668c_0_1834" target="_blank" class="text-[#F47B20] hover:underline">TruAudience by Transunion</a>
                  Feel free to <a href="https://triplelift.atlassian.net/wiki/spaces/KNOW/pages/4259348481/TransUnion+Data+Marketplace#RFP-or-Pitch-Support" target="_blank" class="text-[#F47B20] hover:underline">submit a salesforce support ticket</a> to get audience recommendations from the LCS Team. We're here to help!
              </p>
            `
          },
          'campaign_goal_question': {
            question: 'What is your campaign goal?',
            choices: [
              { label: 'Awareness', nextStepId: 'awareness_final_outcome' },
              { label: 'Consideration', nextStepId: 'consideration_outcome' },
              { label: 'Conversion', nextStepId: 'conversion_outcome' },
            ],
          },
          'awareness_final_outcome': {
            outcome: `Consider using demographic segments (Age, Gender), Broad Interests & Lifestyle (Sports, Healthy Eating).`
          },
          'consideration_outcome': {
            outcome: `Consider using Specifc interests (Football), Affinity (Green & Sustainability), Psychographic (Luxury Home Architecture & Design).`
          },
          'conversion_outcome': {
            outcome: `Consider using Purchase intent segments and <a href="https://triplelift.atlassian.net/wiki/spaces/TA1/pages/4275470502/Generative+AI+Custom+Keyword+Segments" target="_blank" class="text-[#F47B20] hover:underline">Custom segments</a>.`
          },
          'us_web_specific_formats': {
            outcome: `
                <p class="text-lg sm:text-xl font-semibold mb-2">Decision Reached!</p>
                <p>
                    <a href="https://docs.google.com/presentation/d/1fsjOtXxDzJpuvzna0ldTK_os9xEWOqI27PC5YZTsOso/edit?slide=id.g36e6821631b_0_2252#slide=id.g36e6821631b_0_2252" target="_blank" class="text-[#F47B20] hover:underline">Layer on Life360 segments</a> or <a href="https://triplelift.atlassian.net/wiki/spaces/TA1/pages/4275470502/Generative+AI+Custom+Keyword+Segments" target="_blank" class="text-[#F47B20] hover:underline">Use the Gen AI Segment Planner and create a TripleLift Audiences custom segment</a>
                </p>
            `
          },
          'intl_web_path': {
            question: 'Please select from the following options.',
            choices: [
              { label: 'TripleLift Audiences', nextStepId: 'intl_triplelift_outcome' },
              { label: 'TripleLift Audiences does not cover my targeting needs.', nextStepId: 'intl_genai_outcome' }
            ]
          },
          'intl_ctv_outcome': {
            outcome: 'Unfortunately no audience targeting is available.'
          },
          'intl_genai_outcome': {
            outcome: `Use the Gen AI Segment Planner and create a TripleLift Audiences <a href="https://triplelift.atlassian.net/wiki/spaces/TA1/pages/4275470502/Generative+AI+Custom+Keyword+Segments?additional_analytics=queryHash---6f6d6706b4b612d22e1e98e07828e011475e63fbeeb3a30e5b8e5f60ec875944" target="_blank" class="text-[#F47B20] hover:underline">Custom segments</a>.`
          },
          'intl_triplelift_outcome': {
            outcome: `
                <p class="text-lg sm:text-xl font-semibold mb-2">Decision Reached!</p>
                <p><a href="https://docs.google.com/presentation/d/1fsjOtXxDzJpuvzna0ldTK_os9xEWOqI27PC5YZTsOso/edit?slide=id.g36e6821631b_0_455#slide=id.g36e6821631b_0_455" target="_blank" class="text-[#F47B20] hover:underline">TripleLift Audiences</a></p>
            `
          },
          'intl_campaign_goal_question': {
            question: 'What is your campaign goal?',
            choices: [
              { label: 'Awareness', nextStepId: 'intl_awareness_outcome' },
              { label: 'Consideration', nextStepId: 'intl_consideration_outcome' },
              { label: 'Conversion', nextStepId: 'intl_conversion_outcome' },
            ],
          },
          'intl_awareness_outcome': {
            outcome: `Consider using demographic segments (Age, Gender), Broad Interests & Lifestyle (Sports, Healthy Eating).`
          },
          'intl_consideration_outcome': {
            outcome: `Consider using Specifc interests (Football), Affinity (Green & Sustainability), Psychographic (Luxury Home Architecture & Design).`
          },
          'intl_conversion_outcome': {
            outcome: `Consider using Purchase intent segments and <a href="https://triplelift.atlassian.net/wiki/spaces/TA1/pages/4275470502/Generative+AI+Custom+Keyword+Segments" target="_blank" class="text-[#F47B20] hover:underline">Custom segments</a>.`
          },
          'other_geo_outcome': {
            outcome: 'Unfortunately no audience targeting is available.'
          }
        };

        let history = [];
        let currentStepId = 'start';
        const appContainer = document.getElementById('app');

        function renderApp() {
            const currentStep = decisionTreeData[currentStepId];
            const isOutcome = currentStep && currentStep.outcome;
            const sidebarHTML = `
                <div class="w-full md:w-1/3 bg-[#0E3D52] text-white p-6 md:p-8 flex flex-col space-y-4 rounded-b-xl md:rounded-bl-xl md:rounded-tr-none">
                    <h2 class="text-2xl font-bold mb-4 text-center text-[#5EA7A5]">RFP Details</h2>
                    <div class="scrollable-history flex-1">
                        ${history.length === 0 ? `
                            <p class="text-gray-400 text-sm">Choose and enter details to explore TripleLiftâ€™s offerings.</p>
                        ` : `
                            <ol class="list-none space-y-4 text-sm">
                                ${history.map((item, index) => `
                                    <li class="bg-[#37464F] p-3 rounded-lg border border-[#5EA7A5] shadow-inner">
                                        <p class="font-semibold text-gray-300">Question ${index + 1}:</p>
                                        <p class="font-medium text-white mb-1">${item.question}</p>
                                        <p class="text-sm text-gray-400">Your choice: <span class="font-normal text-white">${item.answer}</span></p>
                                    </li>
                                `).join('')}
                            </ol>
                        `}
                    </div>
                    <div class="mt-auto flex flex-col space-y-2">
                        <button id="goBackBtn" class="w-full flex items-center justify-center space-x-2 bg-[#5EA7A5] hover:bg-[#4a8a88] text-white font-semibold py-2 px-4 rounded-full transition-colors duration-200 ${history.length === 0 ? 'opacity-50 cursor-not-allowed' : ''} shadow-md">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
                            <span>Go Back</span>
                        </button>
                        <button id="resetBtn" class="w-full flex items-center justify-center space-x-2 bg-[#F15C2C] hover:bg-[#D54A1E] text-white font-semibold py-2 px-4 rounded-full transition-colors duration-200 shadow-md">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 01-9 9m-9-9a9 9 0 019-9"/><path d="M7 11.5L9 14l2-2.5"/><path d="M22 4L12 4"/><path d="M12 22L12 12"/></svg>
                            <span>Reset</span>
                        </button>
                    </div>
                </div>
            `;

            let mainContentHTML = `
                <div class="w-full md:w-2/3 p-6 md:p-8 flex flex-col items-center justify-center text-center space-y-8 bg-white rounded-t-xl md:rounded-tl-none md:rounded-br-xl">
            `;

            if (currentStep && currentStep.question) {
                mainContentHTML += `
                        <div class="space-y-6">
                            <h1 class="text-3xl sm:text-4xl md:text-5xl font-extrabold text-black leading-tight">
                                ${currentStep.question}
                            </h1>
                            <div id="choices-container-main" class="flex flex-col sm:flex-row flex-wrap justify-center items-center gap-4">
                                ${currentStep.choices.map((choice, index) => `
                                    <button class="choice-btn w-full sm:w-auto px-6 py-3 bg-[#F47B20] text-white text-lg font-semibold rounded-full shadow-lg hover:bg-[#D46B1E] transform transition-transform duration-200 hover:scale-105 active:scale-95" data-next-step-id="${choice.nextStepId}" data-choice-label="${choice.label}">
                                        ${choice.label}
                                    </button>
                                `).join('')}
                                ${currentStepId === 'campaign_goal_question' || currentStepId === 'intl_campaign_goal_question' ? `
                                    <a href="https://docs.google.com/presentation/d/1fsjOtXxDzJpuvzna0ldTK_os9xEWOqI27PC5YZTsOso/edit?slide=id.g36e6821631b_0_455#slide=id.g36e6821631b_0_455" target="_blank" class="w-full sm:w-auto px-6 py-3 bg-[#5EA7A5] text-white text-lg font-semibold rounded-full shadow-lg hover:bg-[#4a8a88] transform transition-transform duration-200 hover:scale-105 active:scale-95 flex items-center justify-center">
                                        View TripleLift Audiences Catalog
                                    </a>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `;
            } else if (currentStep && currentStep.outcome) {
                mainContentHTML += `
                        <div class="bg-white p-6 sm:p-8 rounded-xl border-2 border-[#F15C2C] text-[#ED79B0] shadow-lg max-w-md mx-auto animate-fadeInUp">
                            <div class="text-4xl mb-4">
                                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-auto text-[#ED79B0]"><path d="M22 11.08V12a10 10 0 11-5.93-8.87"/><path d="M22 4L12 14.01l-3-3"/></svg>
                            </div>
                            <div class="text-base sm:text-lg">${currentStep.outcome}</div>
                            <div class="mt-4 flex justify-center">
                                <button id="startOverBtn" class="px-4 py-2 bg-[#F47B20] text-white text-sm font-semibold rounded-full hover:bg-[#D46B1E] transition-colors duration-200 shadow-md">
                                    Start Over
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                mainContentHTML += `
                        <div class="space-y-6">
                             <h1 class="text-3xl sm:text-4xl md:text-5xl font-extrabold text-black leading-tight">
                                This step does not exist.
                            </h1>
                        </div>
                    </div>
                `;
            }

            appContainer.innerHTML = sidebarHTML + mainContentHTML;

            const goBackBtn = document.getElementById('goBackBtn');
            if (goBackBtn) goBackBtn.onclick = handleGoBack;
            const resetBtn = document.getElementById('resetBtn');
            if (resetBtn) resetBtn.onclick = handleReset;
            const startOverBtn = document.getElementById('startOverBtn');
            if (startOverBtn) startOverBtn.onclick = handleReset;
            const choiceButtons = document.querySelectorAll('.choice-btn');
            choiceButtons.forEach(button => {
                button.onclick = (event) => {
                    const nextStepId = event.target.dataset.nextStepId;
                    const choiceLabel = event.target.dataset.choiceLabel;
                    handleChoiceClick({ label: choiceLabel, nextStepId }, currentStep.question);
                };
            });
        }

        function handleChoiceClick(choice, question) {
            history.push({ question, answer: choice.label });
            currentStepId = choice.nextStepId;
            renderApp();
        }

        function handleGoBack() {
            if (history.length > 0) {
                history.pop();
                let prevStepId = 'start';
                if (history.length > 0) {
                    const prevQuestion = history[history.length - 1].question;
                    const previousEntry = Object.entries(decisionTreeData).find(([key, value]) => {
                        if (value.choices) {
                            return value.choices.some(c => c.nextStepId === currentStepId);
                        }
                        return false;
                    });
                    if (previousEntry) {
                        prevStepId = previousEntry[0];
                    }
                }
                currentStepId = prevStepId;
                renderApp();
            } else {
                handleReset();
            }
        }

        function handleReset() {
            history = [];
            currentStepId = 'start';
            renderApp();
        }

        window.onload = () => {
            renderApp();
        };
    </script>
</body>
</html>
